<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.5 (457109)"/><meta name="author" content="874681044@qq.com"/><meta name="created" content="2018-03-05 09:53:35 +0000"/><meta name="source" content="desktop.win"/><meta name="source-application" content="evernote.win32"/><meta name="updated" content="2018-03-14 03:10:43 +0000"/><title>BeautifulSoup</title></head><body><div><ul><li><span style="font-size: 18pt;">代码：</span></li></ul><div><font style="font-size: 18pt;"><br/></font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Times New Roman" style="font-size: 14pt;">from&nbsp;&nbsp;bs4&nbsp;&nbsp;import BeautifulSoup</font></div><div><font face="Times New Roman" style="font-size: 14pt;">soup = BeautifulSoup(open("D://demo.html", "html.parser")</font></div></div><div><ul><li><span style="font-size: 18pt;">库解析器：&nbsp;&nbsp;lxml、xml、html5lib</span></li><li><span style="font-size: 18pt;">BeautifulSoup类的基本元素：</span></li><ul><li><span style="font-size: 18pt;">Tag：标签，&lt;&gt;和&lt;/&gt;</span></li><li><span style="font-size: 18pt;">Name:标签的名字，&lt;p&gt;...&lt;/p&gt;的Name是p，格式：&lt;tag&gt;.name</span></li><li><span style="font-size: 18pt;">Atrributes:标签的属性，字典形式组织，格式：&lt;tag&gt;.attrs</span></li><li><span style="font-size: 18pt;">NavigableString:标签类非属性字符串，格式：&lt;tag&gt;.string</span></li><li><span style="font-size: 18pt;">Comment:标签内字符串的注释部分</span></li></ul><li style="text-align: left;"><span style="font-size: 18pt;">标签树的遍历：</span></li><ul><li style="text-align: left;"><span style="font-size: 18pt;">下行遍历：.contents子节点的列表，将标签的所有儿子节点存入列表；.children子节点的迭代类型，用于循环遍历儿子节点；.descendants子孙节点的迭代类型，包含所有子孙节点，用于循环遍历</span></li></ul></ul><div><font style="font-size: 14pt;"><br/></font></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Times New Roman" style="font-size: 14pt;">for&nbsp;&nbsp;child&nbsp;&nbsp;in soup.body.children:</font></div><div><font face="Times New Roman" style="font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp; print(child) </font></div></div><div><font style="font-size: 18pt;"><br/></font></div><div><div><font style="font-size: 18pt;"><br/></font></div><ul><li style="text-align: left;"><span style="font-size: 18pt;">上行遍历：.parent节点的父亲标签；.parents节点先辈标签的迭代类型，循环遍历先辈节点</span></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">for parent in soup.a.parents:</font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if parent is None:</font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(parent)</font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(parent.name)</font></span></div></div><ul><li><span style="font-size: 18pt;">平行遍历：.next_sibling按照HTML文本顺序的下一个平行节点标签；.previous_sibling按照HTML文本顺序的上一个平行节点标签；.next_siblings迭代类型，返回按照HTML文本顺序的后续所有平行节点标签；.previous_siblings迭代类型，返回按照HTML文本顺序的前续所有平行节点标签</span></li></ul></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">for sibling in soup.a.next_siblings:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//previous_siblings </font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(sibling)</font></span></div></div><div><span style="font-size: 18pt;"><img src="BeautifulSoup.resources/6E90D806-DF4B-4D2F-BDEE-6F130A59B7A5.png" height="629" width="1145"/></span></div><div><font style="font-size: 18pt;"><br/></font></div><div><ul><li><span style="font-size: 18pt;">HTML格式化和编码</span></li><ul><li><span style="font-size: 18pt;">prettify()</span></li></ul><li><span style="font-size: 18pt;">YAML: Ain't Markup Langugage</span></li><ul><li><span style="font-size: 18pt;">无类型键值对；</span></li><li><span style="font-size: 18pt;">用缩进表达所属关系；</span></li></ul></ul><div style="text-align: center;"><span style="font-size: 18pt;"><img src="BeautifulSoup.resources/2652139F-2CC2-4401-8064-1C126A4FB4E4.png" height="175" width="507"/></span></div><ul><li><span style="font-size: 18pt;">用 - 表达并列关系</span></li></ul><div style="text-align: center;"><span style="font-size: 18pt;"><img src="BeautifulSoup.resources/11314EFC-5A51-49B7-84F5-CC3D25FDA0D4.png" height="170" width="505"/></span></div><ul><li><span style="font-size: 18pt;">用 |&nbsp;&nbsp;表示整块数据</span></li><li><span style="font-size: 18pt;">#表示注释</span></li></ul></div><div style="text-align: center;"><span style="font-size: 18pt;"><img src="BeautifulSoup.resources/79F00769-A380-43E6-8A42-DFFDF764A633.png" height="230" width="738"/></span></div><div style="text-align: center;"><span style="font-size: 18pt;"><img src="BeautifulSoup.resources/E942A205-DDF3-4442-B7FF-3DFD435609E9.png" height="293" width="840"/></span></div><div><ul><li><span style="font-size: 18pt;">&lt;&gt;.find_all(name,attrs,recursive,string,**kwargs)</span></li></ul></div><div><ul><li><span style="font-size: 18pt;">soup.find_all('a');soup.find_all(['a','b']);输出为列表类型</span></li><li><span style="font-size: 18pt;">name:对标签名称的检索字符串</span></li><li><span style="font-size: 18pt;">attrs:对标签属性值的检索字符串，可标注属性检索</span></li><li><span style="font-size: 18pt;">recursive:是否对子孙全部检索，默认True</span></li><li><span style="font-size: 18pt;">string:&lt;&gt;...&lt;/&gt;中字符串区域的检索字符串</span></li><li><span style="font-size: 18pt;">&lt;tag&gt;.find_all()等价于&lt;tag&gt;();soup.find_all()等价于soup()</span></li></ul></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Times New Roman" style="font-size: 14pt;"><font color="#000000">//</font><span style="color: rgb(0, 0, 0);">查找页面中的所有链接</span></font></div><div><span style="color: rgb(0, 0, 0);"><font face="Times New Roman" style="font-size: 14pt;">for link in soup.find_all('a'):</font></span></div><div><span style="color: rgb(0, 0, 0);"><font face="Times New Roman" style="font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(link.get('href'))</font></span></div><div><span style="color: rgb(0, 0, 0);"><font face="Times New Roman" style="font-size: 14pt;"><br/></font></span></div><div><font color="#000000" face="Times New Roman" style="font-size: 14pt;">//查找所有文档中的标签名</font></div><div><font color="#000000" face="Times New Roman" style="font-size: 14pt;">for&nbsp;&nbsp;tag in soup.find_all(True):</font></div><div><font color="#000000" face="Times New Roman" style="font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp; print(tag.name) </font></div><div><font color="#000000" face="Times New Roman" style="font-size: 14pt;"><br/></font></div><div><font face="Times New Roman" style="font-size: 14pt;"><span style="color: rgb(51, 51, 51);">//</span><span style="color: rgb(51, 51, 51);">使用正则表达式打印以b开头的标签</span></font></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">import&nbsp;&nbsp;re</font></span></div><div><font face="Times New Roman" style="font-size: 14pt;"><span style="color: rgb(51, 51, 51);">for tag in soup.find_all(</span><a href="http://re.compile/" style="color: rgb(51, 51, 51);">re.compile</a><span style="color: rgb(51, 51, 51);">('b')):</span></font></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(tag.name)</font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;"><br/></font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">//<span style="color: rgb(51, 51, 51);">查找p标签中含有course的标签</span></font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">soup.find_all('p','course')</font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;"><br/></font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">//<span style="color: rgb(51, 51, 51);">查找id为link1的标签</span></font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">soup.find_all(id='link1')</font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;"><br/></font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">//用正则表达式查找id包含link的标签</font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">import&nbsp;&nbsp;re</font></span></div><div><font face="Times New Roman" style="font-size: 14pt;"><span style="color: rgb(51, 51, 51);">soup.find_all(id=</span><a href="http://re.compile/" style="color: rgb(51, 51, 51);">re.compile</a><span style="color: rgb(51, 51, 51);">('link'))</span></font></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;"><br/></font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Times New Roman" style="font-size: 14pt;">//只查找当前标签</font></span></div><div><font face="Times New Roman" style="font-size: 14pt;">soup.find_all('a',recursivce=False)</font></div><div><font face="Times New Roman" style="font-size: 14pt;"><br/></font></div><div><font face="Times New Roman" style="font-size: 14pt;">//检索Basic Python</font></div><div><font face="Times New Roman" style="font-size: 14pt;">soup.find_all(string='Basic Python')</font></div></div><div><font style="font-size: 18pt;"><br/></font></div><div style="text-align: center;"><span style="font-size: 18pt;"><img src="BeautifulSoup.resources/F24A8520-E7E0-4DA3-B031-1521F8299840.png" height="444" width="938"/></span></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><font style="font-size: 18pt;"><br/></font></div><div><br/></div></body></html>